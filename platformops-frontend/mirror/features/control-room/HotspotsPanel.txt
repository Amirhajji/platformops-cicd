ORIGINAL FILE: C:\Users\h50048240\3D Objects\PlatformOPS\platformops-frontend\src\features\control-room\HotspotsPanel.tsx
==================================================
// src/features/control-room/HotspotsPanel.tsx
import { useHotspots } from "../../hooks/useHotspots";
import { Card } from "../../ui/Card";
import { Badge } from "../../ui/Badge";
import type { Hotspot } from "../../api/analytics.api";

function hotspotTone(h: Hotspot) {
  if (h.critical_open > 0) return "crit";
  if (h.open_events > 0) return "warn";
  return "ok";
}

export function HotspotsPanel() {
  const { data, isLoading, isError } = useHotspots();

  return (
    <Card title="Active Hotspots">
      <div className="mb-3 text-xs text-zinc-500">
        Hotspots are where alert pressure is concentrated. Use them to triage â€œwhat to look at firstâ€.
      </div>

      {isLoading && <div className="text-sm text-zinc-500">Loading hotspotsâ€¦</div>}

      {isError && (
        <div className="rounded-lg border border-red-900/40 bg-red-950/20 p-3 text-sm text-red-200">
          Failed to load hotspots.
        </div>
      )}

      {!isLoading && !isError && (!data || data.length === 0) && (
        <div className="text-sm text-zinc-500">
          No active alert concentration.
        </div>
      )}

      {!isLoading && !isError && data && data.length > 0 && (
        <ul className="space-y-2">
          {data.map((h) => (
            <li
              key={h.signal_code}
              className="rounded-lg border border-zinc-800 bg-zinc-950 px-3 py-2"
            >
              <div className="flex items-start justify-between gap-2">
                <div>
                  <div className="font-mono text-sm text-zinc-100">
                    {h.signal_code}
                  </div>
                  <div className="mt-1 text-xs text-zinc-400">
                    open <span className="font-mono text-zinc-200">{h.open_events}</span> Â·
                    critical{" "}
                    <span className="font-mono text-red-300">{h.critical_open}</span> Â·
                    max duration{" "}
                    <span className="font-mono text-zinc-200">{h.max_duration_ticks}</span> ticks Â·
                    last tick{" "}
                    <span className="font-mono text-zinc-200">{h.last_tick}</span>
                  </div>
                </div>

                <div className="flex flex-col items-end gap-2">
                  <Badge label={h.critical_open > 0 ? "CRITICAL PRESSURE" : "PRESSURE"} tone={hotspotTone(h)} />
                  <button
                    disabled
                    className="rounded border border-zinc-800 bg-zinc-900 px-2 py-1 text-xs text-zinc-300 hover:bg-zinc-800/40 disabled:opacity-50"
                    title="Will deep-link to Metrics (signal panel) and Alerts (filtered) once those routes exist."
                  >
                    Investigate â†’
                  </button>
                </div>
              </div>
            </li>
          ))}
        </ul>
      )}
    </Card>
  );
}

